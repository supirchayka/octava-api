# Логика работы интерьерной галереи (админка)

Админский фронт должен управлять интерьерной галереей на главной странице как **списком слайдов**: любые количества изображений, упорядоченных вручную, с возможностью добавлять и удалять элементы. Сервер хранит и отдает только данные из реальной базы, без сидовых заглушек.

## Что отдает API
- `GET /admin/pages/home` возвращает блок `interior` с полями `text` и **полным списком** `images` без ограничений по количеству. Каждый элемент содержит `id`, `fileId`, `url`, `alt`, `caption`, `order` и формируется прямо из записей `HomeGalleryImage` в БД (если в таблице есть свои загрузки, сидовые заглушки скрываются). Если `alt` не задан, он подставляется из `originalName` файла. 【F:src/services/admin-pages.service.ts†L281-L352】
- `PUT /admin/pages/home` использует единый JSON: `interiorImages` описаны как массив `{ fileId, alt?, caption?, order? }`. Авторизация через `Authorization: Bearer <token>`. 【F:src/routes/admin-pages.routes.ts†L18-L104】

## Алгоритм работы слайдера
1. **Загрузите файлы** через `POST /admin/files/upload` и сохраните их `id`. Эти значения пойдут в `fileId`.
2. **Подтяните актуальные данные** вызовом `GET /admin/pages/home`, чтобы вывести все сохраненные слайды из БД (id/fileId/url/alt/caption/order) и не опираться на сиды.
3. **Соберите новый список `interiorImages`** в порядке показа слайдов. Для каждого элемента:
   - `fileId` — обязателен (новый загруженный файл или уже существующий слайд);
   - `alt`, `caption` — опциональны; отсутствие `alt` приведет к автоподстановке имени файла;
   - `order` — число для явной сортировки; если не указать, порядок устанавливается по индексу массива.
4. **Отправьте полный массив** через `PUT /admin/pages/home`:
   ```json
   {
     "interiorText": "Краткое описание блока интерьера",
     "interiorImages": [
       { "fileId": 101, "alt": "Холл", "caption": "Зона ожидания", "order": 0 },
       { "fileId": 102, "alt": "Кабинет", "order": 1 },
       { "fileId": 205, "alt": "Ресепшн", "order": 2 }
     ]
   }
   ```
   - Сервер **полностью пересобирает** интерьерную галерею: удаляет старые записи `purpose=GALLERY` и создаёт новые в переданном порядке. Пустой массив очищает галерею. Отсутствие поля `interiorImages` оставляет текущие данные без изменений. 【F:src/services/admin-pages.service.ts†L430-L485】
   - Остальные поля (`hero*`, `subhero*`, `directions`, `seo`) отправляйте только если их нужно менять.
5. **Проверьте результат**: ожидаемый статус `204 No Content`; повторный `GET /admin/pages/home` должен вернуть список слайдов в нужном порядке из БД.

## Задание на проверку и доработку фронта
- Рендерить интерьерный блок как слайдер, используя весь массив `interior.images` без жесткого лимита на 4 элемента.
- При любом изменении (добавили, удалили, переставили) собирать **полный** список слайдов и отправлять его в `PUT /admin/pages/home`.
- Гарантировать, что UI показывает реальные данные из БД (url/alt/caption/order) и не подставляет сидовые значения.
- Валидировать форму: не отправлять запрос, если у элемента нет `fileId`; опционально подсвечивать пустые `alt/caption`, но не блокировать отправку.
